% !TeX root = UT-Thesis-Template.tex
\chapter{وارسی مدل ساختارمند}

در این فصل، به ادامه‌ی ساختارمندتر کردن کار می‌پردازیم. در فصل گذشته، ساختار عبارات منظم را به تعریف وارسی مدل اضافه کردیم و حالا می‌خواهیم، ساختار زبانمان را به کار اضافه کنیم. این آخرین تلاش \cite{calcul} برای گسترش کار بوده است. یعنی وارسی مدل به شکل جدید تعریف شده است و معادل بودن آن با صورت قبلی وارسی مدل ثابت شده است و پس از آن کار پایان می‌پذیرد. 

چون تعریف صورت جدید روی ساختار زبان انجام گرفته است، جزئیات بسیار طولانی‌ای دارد. همین موضوع باعث شده است، تا اثبات‌ برابری این صورت با صورت قبلی هم بسیار مفصل و حجیم باشد. این اثبات در \cite{calcul} به طور کامل حین معرفی هر مورد تعریف بیان شده است. بنابراین، از ارائه‌ی دوباره‌ی این جزئیات خودداری کرده‌ایم.

\begin{defn}
	
تابع
$\mathcal{\hat{M}}$
 را از نوع
 $\mathbb{(\underline{EV} \times R)} \rightarrow  \mathit{P}({\mathfrak{S}^{+\infty})}
\rightarrow ( \mathbb{\underline{EV}} \times \mathit{P}(\mathfrak{S}^{+\infty})) $
وارسی مدل ساختارمند می‌نامیم( ضابطه‌ی تابع در ادامه‌ی متن آمده است).
\end{defn}
در ادامه، ممکن است به‌جای 
$\mathcal{\hat{M}}\langle \underline{\rho}, \mathsf{R} \rangle \mathcal{S}^* \llbracket \mathsf{P} \rrbracket$
از 
$\mathcal{\hat{M}}\langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{P} \rrbracket$
استفاده کرده باشیم، یعنی در اشاره به تابع $\mathcal{S}^*$ به براکت‌ها
$\llbracket \; \rrbracket$
قناعت کرده باشیم.



تعریف روی ساختار مجموعه‌ی 
$\mathbb{P \cup Sl \cup S}$
انجام شده است. تقریبا کاری شبیه به اثبات لمی که در بحث تصمیم ناپذیری در فصل سوم داشتیم.
در ادامه، قسمت‌های مختلف تعریف $\mathcal{\hat{M}}$ را به ازای برنامه‌ی $\mathsf{P}$، محیط اولیه‌ی $\underline{\rho}$ و عبارت منظم $\mathsf{R}$تعریف می‌کنیم. یعنی در حال تعریف 
$\mathcal{\hat{M}} \langle \underline{\rho} , \mathsf{R} \rangle \mathcal{S}^* 
\llbracket \mathsf{P} \rrbracket$
هستیم، روی ساختار برنامه‌ها یعنی $\mathsf{P}$.
$$\blacktriangleleft \mathsf{P=Sl:}$$
$$\mathcal{\hat{M}} \langle \underline{\rho} , \mathsf{R} \rangle \mathcal{S}^* \llbracket \mathsf{P} \rrbracket=
\bigcup_{i=1}^n \{\langle \underline{\rho} , \pi \rangle | \exists \mathsf{R'} \in \mathbb{R}, \; \langle \pi , \mathsf{R'} \rangle \mathcal{\hat{M}^\nmid}
\langle \underline{\rho}, \mathsf{R}_i \rangle \mathcal{S}^* \llbracket \mathsf{Sl} \rrbracket \}
$$  
$$\mathsf{where\; dnf(R)=R_1 + R_2 + ... + R_n}$$
اثبات برابری این قسمت از تابع با صورت فصل قبل با اینکه 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket$
هنوز تعریف نشده است، در \cite{calcul} آمده است. استدلال این است که برابری 
$\mathcal{\hat{M}} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket=
\mathcal{{M}} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket$
در فرض استقرا آمده است. کلیت اثبات هم این است که از باز کردن تعریف
$\mathcal{{M}} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{P} \rrbracket$
با استفاده‌ی مستقیم تعاریف و بدون تکنیک خاصی به 
$\mathcal{\hat{M}} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{P} \rrbracket$
رسیده است.

در ادامه با توجه به تعریف قبل، به بیان تعریف 
$\mathcal{\hat{M}^\nmid}$
پرداخته شده است. این تنها بخش تابع $\mathcal{\hat{M}}$ است که معرفی نشده است و با مشخص شدن آن معنای 
$\mathcal{\hat{M}}$
به ازای برنامه‌های مختلف مشخص می‌شود. 

این نکته را در نظر داریم که 
$\mathcal{\hat{M}^\nmid}$
در عمل روی مجوعه‌ی معنای برنامه‌ها تعریف می‌شود. مثلا، به ازای  
$\Pi \subseteq \mathfrak{S}^{+\infty}$
دلخواه که مساوی معنای یک برنامه نباشد، اینکه این تابع با یک محیط اولیه و یک عبارت منظم چه خروجی‌ای دارد، برای ما اهمیتی ندارد. در واقع، تعریف تابع اصلا به ازای چنین ورودی‌ای خروجی ندارد. به عبارت دیگر، تابعْ جزئی است. مشابه 
$\mathcal{M^\nmid}$
خروجی 
$\mathcal{\hat{M}^\nmid}$
هم یک زوج مرتب شامل $\pi$ ای است که $\mathsf{R}$ را ارضا کرده است، به همراه یک عبارت منظم بدون $+$ که بخشی از $\mathsf{R}$ را نشان می‌دهد که با $\pi$ تطابق داده نشده است.
$$\blacktriangleleft\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{\varepsilon} \rangle \llbracket \mathsf{S} \rrbracket
=
\{\langle \pi , \varepsilon \rangle | \pi \in \mathcal{S}^* \llbracket \mathsf{S} \rrbracket \}$$

برای $\mathsf{Sl=SL' \; S}$ و $\mathsf{R} \in \mathbb{R^\nmid} \cap \mathbb{R^+}$ داریم:

$$\blacktriangleleft\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket
=
\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl'} \rrbracket
\cup$$ 
$$\{ \langle \pi \langle \mathsf{at}\llbracket \mathsf{S} \rrbracket, \rho \rangle \pi'
, \mathsf{R''} \rangle | \langle \pi \langle at \llbracket \mathsf{S}\rrbracket, \rho \rangle, \mathsf{R'} \rangle \in \mathcal{\hat{M}^\nmid}  \langle \underline{\rho} , \mathsf{R} \rangle \llbracket \mathsf{Sl'} \rrbracket\land$$
 $$\langle \langle at \llbracket \mathsf{S}\rrbracket , \rho \rangle \pi' , \mathsf{R''} \rangle \in \mathcal{\hat{M}^\nmid}
\langle \underline{\rho},\mathsf{R'} \rangle   \llbracket \mathsf{S} \rrbracket
 \}$$
از اینجا به بعد، با تعاریف طویل‌تری از آنچه تا حالا داشتیم، روبرو هستیم. هرچند که مفهوم چندان پیچیده‌ای پشت این تعاریف نیست. به ‌طور خلاصه، تعریف بالا می‌گوید، تعریف 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket$
وابسته به تعریف 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket$
و
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl'} \rrbracket$
است. ردهای پیشوندی‌ای که داخل این دو مجموعه هستند، به یکدیگر چسبانده می‌وند، به‌ طوریکه اول ردهای داخل 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl'} \rrbracket$
قرار می‌گیرند و بعد ردهای داخل 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket$.
ردهای داخل 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl'} \rrbracket$
به تنهایی نیز داخل 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket$
قرار می‌گیرند. این تعریف بر اساس تعریف 
$\mathcal{S}^* \llbracket \mathsf{Sl} \rrbracket$
ارائه شده است. اساس گرفتن تعریف تابع 
$\mathcal{S}^*$
در کنار توجه به تعریف تابع 
$\mathcal{M}$
که در فصل پیش ارائه شد، در ادامه‌ی تعریف 
$\mathcal{\hat{M^\nmid}}$
	 نیز حضور دارد.

برای $\mathsf{Sl=\epsilon}$ و $\mathsf{R} \in \mathbb{R^\nmid} \cap \mathbb{R^+}$ داریم:

$$\blacktriangleleft\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket
=$$
$$\{ \langle \langle at \llbracket \mathsf{Sl} \rrbracket , \rho \rangle , \mathsf{R'} \rangle | \langle \underline{\rho} , \langle at \llbracket \mathsf{Sl} \rrbracket, \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket
\}$$
$$\mathsf{where \; fstnxt(R)=\langle L:B,R' \rangle}$$
یعنی خروجی تابع به ازای این ورودی مجموعه‌ای است، شامل همه‌ی ردهای پیشوندی تک عضوی‌ای که محیط آن‌ها اولین سر عبارت منظم$(\mathsf{L:B})$ را ارضا می‌کند. به عبارت دیگر، هر محیطی که این اتم را ارضا کند، برچسب این لیست عبارت‌های دستوری را در این مجموعه می‌آورد( به همراه ادامه‌ی عبارت منظم).

برای $\mathsf{S=\;x \doteq A;}$ و $\mathsf{R} \in \mathbb{R^\nmid} \cap \mathbb{R^+}$ داریم:
$$\blacktriangleleft\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket
=$$
$$\{
\langle \langle at \llbracket \mathsf{S} \rrbracket, \rho \rangle , \mathsf{R'} \rangle |
\langle \underline{\rho}, \langle at \llbracket \mathsf{S} \rrbracket, \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket \}$$
$$\cup \{ \langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle  \langle aft \llbracket \mathsf{S} \rrbracket, 
\rho [\mathsf{x}\leftarrow \mathcal{A}\llbracket \mathsf{A} \rrbracket \rho ]\rangle , \varepsilon \rangle | \mathsf{R'} \in \mathbb{R_\varepsilon} \land$$
$$
\langle \underline{\rho}, \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in 
\mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket
\}$$
$$\cup \{
\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle aft \llbracket \mathsf{S} \rrbracket , \rho [\mathsf{x} \leftarrow \mathcal \llbracket \mathsf{A}\rrbracket \rho]\rangle, \mathsf{R''}\rangle | \mathsf{R'} \notin \mathbb{R_\varepsilon} \land$$
$$\langle \underline{\rho},\langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket \land \langle \mathsf{L':B',R''} \rangle = 
\mathsf{fstnxt(R') }\land$$
$$\langle \underline{\rho}, \langle aft \llbracket \mathsf{S} \rrbracket,\rho 
[\mathsf{x} \leftarrow \mathcal{A}\llbracket \mathsf{A} \rrbracket \rho]\rangle \rangle \in 
\mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket
\}$$
$$\mathsf{where \; fstnxt(R)=\langle L:B,R' \rangle}$$

این تابع عبارت‌ دستوری را به همراه زوجی شامل محیط اولیه و عبارت منظم می‌گیرد، همان خروجی‌ای که در حالت قبلی برمی‌گردانْد را برمی‌گردانَد، سپس نسبت به اینکه پس از تغییر در محیط‌ها (در اثر اجرای عبارت‌ دستوری مقدار دهی) یک رد پیشوندی با ادامه‌ی عبارت منظم سازگار باشد یا نباشد، زوج‌هایی را متشکل از رد پیشوندی و عبارت منظم به خروجی اضافه می‌کند.

از این ۴ حالت تنها اثبات حالت آخر در \cite{calcul} آورده شده است. اثبات دیگر حالات را هم می‌توان در همین اثبات که مفصل‌تر است، دید. اثبات سر راست است و در آن از جایگذاری تساوی‌های واضح استفاده شده است و جزئیات کافی دارد.

برای عبارت منظم 
$\mathsf{R} \in \mathbb{R}^\nmid \cup \mathbb{R^+}$
و 
$\mathsf{S= \; if \; (B) \; S_t}$
داریم:
$$\blacktriangleleft\mathcal{\hat{M}^\nmid} \langle \underline{\rho},\mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket=$$
$$\{\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R'} \rangle | \langle \underline{\rho} , \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} ]\rrbracket \}$$
$$\cup \{\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle at \llbracket \mathsf{S_t} \rrbracket, \rho \rangle \pi, \mathsf{R''} | \mathcal{B}\llbracket\mathsf{B} \rrbracket \rho = \mathit{T} \land$$
$$\langle \underline{\rho},\langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket \land$$
$$\langle \langle at \llbracket \mathsf{S_t} \rrbracket , \rho \rangle \pi,\mathsf{R''} \rangle \in \mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R'} \rangle\llbracket \mathsf{S_t} \rrbracket \}$$
$$\cup \{\langle \langle at \llbracket \mathsf{S} \rrbracket, \rho \rangle \langle aft \llbracket \mathsf{S} \rrbracket , \rho \rangle , \varepsilon \rangle | \mathcal{B}\llbracket \mathsf{B} \rrbracket \rho = \mathit{F} \land \mathsf{R'} \in \mathbb{R_\varepsilon} \land$$
$$\langle \underline{\rho} , \langle \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket\}$$
$$\cup \{\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle aft \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R''} \rangle | \mathcal{B} \llbracket \mathsf{B} \rrbracket \rho = \mathit{F} \land \mathsf{R'} \notin \mathbb{R_\varepsilon} \land$$
$$\langle \underline{\rho}, \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r\llbracket \mathsf{L':B'} \rrbracket \land \langle \mathsf{L'':B''} , \mathsf{R''} \rangle = \mathsf{fstnxt(R')} \land$$
$$\langle \underline{\rho}, \langle aft \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L'':B''} \rrbracket \}$$
$$\mathsf{where\; fstnxt(R)=\langle L':B', R' \rangle}$$


برای عبارت منظم 
$\mathsf{R} \in \mathbb{R}^\nmid \cup \mathbb{R^+}$
و 
$\mathsf{S= \; if \; (B) \; S_t \; else \; S_f}$
داریم:

$$\blacktriangleleft\mathcal{\hat{M}^\nmid} \langle \underline{\rho},\mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket=$$
$$\{\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R'} \rangle | \langle \underline{\rho} , \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} ]\rrbracket \}$$
$$\cup \{\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle at \llbracket \mathsf{S_t} \rrbracket, \rho \rangle \pi, \mathsf{R''} | \mathcal{B}\llbracket\mathsf{B} \rrbracket \rho = \mathit{T} \land$$
$$\langle \underline{\rho},\langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket \land$$
$$\langle \langle at \llbracket \mathsf{S_t} \rrbracket , \rho \rangle \pi,\mathsf{R''} \rangle \in \mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R'} \rangle  \llbracket \mathsf{S_t} \rrbracket \}$$
$$\cup \{\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle at \llbracket \mathsf{S_f} \rrbracket, \rho \rangle \pi, \mathsf{R''} | \mathcal{B}\llbracket\mathsf{B} \rrbracket \rho = \mathit{F} \land$$
$$\langle \underline{\rho},\langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket \land$$
$$\langle \langle at \llbracket \mathsf{S_f} \rrbracket , \rho \rangle \pi,\mathsf{R''} \rangle \in \mathcal{\hat{M}^\nmid}  \langle \underline{\rho}, \mathsf{R'} \rangle \llbracket \mathsf{S_f} \rrbracket \}$$
$$\mathsf{where\; fstnxt(R)=\langle L':B', R' \rangle}$$
دو قسمت بالا در مورد عبارت‌های دستوری شرطی هستند. در مورد نوع اولی شرطی، یک رد پیشوندی را در معنای $\mathsf{S}$ در نظر بگیرید. بسته به اینکه طبق محیط حاضر در اولین وضعیت این رد پیشوندی، عبارت بولی مقدار صحیح یا غلط داشته باشد، حضور این رد پیشوندی( در یک زوج، به همراه یک عبارت منظم) داخل 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho},\mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket$
تعیین می‌شود. اگر عبارت بولی در محیط مذکورمقدار صحیح داشته باشد، 
در معنای نوع اول عبارت‌ دستوری شرطی، پس از تطبیق سر عبارت منظم با اولین وضعیت هر رد پیشوندی، بر اساس اینکه در دومین وضعیت رد پیشوندی، عبارت بولی برقرار باشد یا نباشد، وابسته به این می‌شود که آیا اگر از وضعیت دوم به بعد این رد پیشوندی( که خود یک رد پیشوندی است) در 
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho},\mathsf{R'} \rangle \llbracket \mathsf{S_t} \rrbracket$
( که $\mathsf{R'}$ نیز دم $\mathsf{R}$ است) حضور دارد یا خیر. اگر عبارت بولی در محیط مذکور ارزش غلط داشته باشد، حضور رد پیشوندی در
$\mathcal{\hat{M}^\nmid} \langle \underline{\rho},\mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket$
وابسته به سازگاری وضعیت دوم رد پیشوندی با سر $\mathsf{R'}$ خواهد بود.

در نوع دوم عبارت‌ دستوری شرطی نیز، تعریف شبیه به نوع اول است، با این تفاوت که اگر عبارت بولی در محیط اولین وضعیت رد پیشوندی ارزش غلط داشته باشد، اتفاقی شبیه به حالت درست می‌افتد.


 برای عبارت منظم 
 $\mathsf{R} \in \mathbb{R}^\nmid \cup \mathbb{R^+}$
 و 
 $\mathsf{S= \; break;}$
 داریم:
$$\blacktriangleleft \mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle 
\llbracket \mathsf{S} \rrbracket= $$
$$\{\langle \langle at \llbracket \mathsf{S} \rrbracket,\rho \rangle , \mathsf{R'} \rangle | \langle \underline{\rho} , \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket\}$$
$$\cup \{ \langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle brk-to \llbracket \mathsf{S} \rrbracket , \rho \rangle , \varepsilon \rangle | \mathsf{R'} \in \mathbb{R_\varepsilon} \land$$
$$\langle \underline{\rho}, \langle at \llbracket \mathsf{S} \rrbracket, \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket \}$$
$$\cup \{ \langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle brk-to \llbracket \mathsf{S} \rrbracket,\rho \rangle ,\mathsf{R''} \rangle | \mathsf{R'} \notin \mathbb{R_\varepsilon} \land$$
$$ \langle \underline{\rho},\langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket \land \langle \mathsf{L':B',R''} \rangle = \mathsf{fstnxt(R') \land}$$
$$\langle \underline{\rho}, \langle brk-to \llbracket \mathsf{S} \rrbracket, \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket \}$$
$$\mathsf{where\; fstnxt(R)=\langle L':B', R' \rangle}$$
 با توجه به موارد قبلی، اینکه این قسمت از تعریف چه معنایی دارد و به چه علت به این شکل است، قابل درک است.
 
 برای عبارت منظم 
 $\mathsf{R} \in \mathbb{R}^\nmid \cup \mathbb{R^+}$
 و 
 $\mathsf{S= \; while \; (B) \; S_b:}$
 داریم:
 
$$\blacktriangleleft\mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket = lfp^\subseteq \; (\mathcal{\hat{F^\nmid}} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket)$$
$$\mathsf{where} \;  \mathcal{\hat{F^\nmid}} \langle \underline{\rho}, \mathsf{R} \rangle X = \{ \langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R'} \rangle | \rho \in \mathbb{EV} \land \langle \underline{\rho}, \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket \}$$
$$\cup \{\langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle aft \llbracket \mathsf{S}\rrbracket , \rho \rangle , \varepsilon \rangle | \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \varepsilon \rangle \in X \land$$
$$\mathcal{B}\llbracket \mathsf{B} \rrbracket \rho = \mathit{F} \}$$
$$\cup \{ \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle aft \llbracket \mathsf{S} \rrbracket , \rho \rangle , \varepsilon \rangle | \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R''} \rangle \in X \land $$
$$\mathcal{B}\llbracket \mathsf{B} \rrbracket \rho = \mathit{F} \land \mathsf{R''} \notin \mathbb{R_\varepsilon} \land \langle \mathsf{L':B',R'} \rangle = \mathsf{fstnxt(R'')} \land \mathsf{R'} \in \mathbb{R_\varepsilon} \land$$
$$\langle \underline{\rho} ,\langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket\}$$
$$\cup \{\langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle aft \llbracket \mathsf{S}\rrbracket , \rho \rangle , \mathsf{R'} \rangle | \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R''} \rangle \in X \land$$
$$\mathcal{B}\llbracket \mathsf{B} \rrbracket \rho = \mathit{F} \land \mathsf{R''} \notin \mathbb{R_\varepsilon} \land \langle \mathsf{L':B',R'} \rangle = \mathsf{fstnxt(R'')} \land \mathsf{R'''} \notin \mathbb{R_\varepsilon} \land$$
$$\langle \underline{\rho}, \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket \land \langle \mathsf{L'':B'' , R'} \rangle = \mathsf{fstnxt(R''')} \land$$
$$\langle \underline{\rho}, \langle aft \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathsf{S}^r \llbracket \mathsf{L'':B''} \rrbracket \}$$
$$\cup \{\langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle at \llbracket \mathsf{S_b} \rrbracket , \rho \rangle \pi_3, \varepsilon \rangle | \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \varepsilon \rangle \in X \land$$
$$\mathcal{B}\llbracket \mathsf{B} \rrbracket \rho = \mathit{T}\land \langle at \llbracket \mathsf{S_b} \rrbracket , \rho \rangle \pi_3 \in \mathcal{S}^* \llbracket \mathsf{S_b} \rrbracket \}$$
$$\cup\{\langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle at \llbracket \mathsf{S_b} \rrbracket , \rho \rangle \pi_3 , \varepsilon \rangle | \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R''} \rangle \in X \land$$
$$\mathcal{B} \llbracket \mathsf{B} \rrbracket \rho = \mathit{T} \land \mathsf{R''} \notin \mathbb{R_\varepsilon} \land \langle \mathsf{L:B} , \varepsilon \rangle = \mathsf{fstnxt(R'')} \land$$	
$$\langle \underline{\rho} ,\langle at \llbracket \mathsf{S} \rrbracket, \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket \land \langle at \llbracket \mathsf{S_b} \rrbracket , \rho \rangle \pi_3 \in \mathcal{S}^* \llbracket \mathsf{S_b} \rrbracket\}$$ 
$$\cup \{ \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \langle at \llbracket \mathsf{S_b} \rrbracket , \rho \rangle \pi_3 , \mathsf{R'} \rangle | \langle \pi_2 \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R''} \rangle \in X \land$$
$$\mathcal{B} \llbracket \mathsf{B} \rrbracket \rho = \mathit{T} \land \mathsf{R''} \notin \mathbb{R_\varepsilon} \land \langle \mathsf{L:B,R''''} \rangle = \mathsf{fstnxt(R'')} \land$$
$$\langle \underline{\rho} , \langle at \llbracket \mathsf{S}\rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B} \rrbracket \land \mathsf{R''''} \notin \mathbb{R_\varepsilon} \land$$
$$\langle \mathsf{L':B',R'''} \rangle = \mathsf{fstnxt(R'''')} \land \langle \underline{\rho} , \langle at \llbracket \mathsf{S_b}\rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L':B'} \rrbracket \land$$
$$\langle \langle at \llbracket \mathsf{S_b} \rrbracket, \rho \rangle \pi_3 , \mathsf{R'} \rangle \in \mathcal{\hat{M}^\nmid} \langle \underline{\rho} , \mathsf{R'''} \rangle \llbracket \mathsf{S_b} \rrbracket \}$$
$$ \mathsf{where \; \langle L':B' , R' \rangle = fstnxt(R)}$$

تفاوت تعریف 
$\mathcal{\hat{M}}^\nmid$
 برای عبارت‌ دستوری حلقه با سایر عبارت‌های دستوری، حضور یک تابع به نام $\mathcal{\hat{F}^\nmid}$ در تعریف معنای آن است. در واقع، وارسی مدل به صورت کوچک‌ترین نقطه‌ثابت این تابع تعریف می‌شود. این همان کاری است که در تعریف معنای اجزای زبان هم انجام شد و چون می‌خواهیم ساختار زبان را به صورت وارسی مدل اضافه انتظار داریم که عملگر نقطه‌ثابت هم در تعریف حضور پیدا کند. تابع $\mathcal{\hat{F}^\nmid}$ مثل یک دور اجرای حلقه‌ عمل می‌کند، منتها در همین حین، سازگاری ردهای پیشوندی را با عبارت منظم بررسی می‌کند و ردهای پیشوندی‌ای را که با عبارت منظم ناسازگار هستند، مجموعه‌ی خروجی‌اش حذف می‌کند.


برای عبارت منظم 
$\mathsf{R} \in \mathbb{R}^\nmid \cup \mathbb{R^+}$
و 
$\mathsf{S= \; ; \;:}$
داریم:
$$\blacktriangleleft\mathcal{\hat{M}^\nmid}  \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{S} \rrbracket = \{\langle \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle , \mathsf{R'} \rangle | \langle \underline{\rho}, \langle at \llbracket \mathsf{S} \rrbracket , \rho \rangle \rangle \in \mathcal{S}^r \llbracket \mathsf{L:B}\rrbracket\}$$
$$\mathsf{where \; fstnxt (R) = \langle L:B,R' \rangle}$$
	
	

برای عبارت منظم 
$\mathsf{R} \in \mathbb{R}^\nmid \cup \mathbb{R^+}$
و 
$\mathsf{S= \; \{Sl\} \;:}$
داریم:
$$\blacktriangleleft \mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \{\mathsf{Sl}\} \rrbracket =
 \mathcal{\hat{M}^\nmid} \langle \underline{\rho}, \mathsf{R} \rangle \llbracket \mathsf{Sl} \rrbracket$$


همین طور، درست بودن یک ویژگی $\mathsf{R} \in \mathbb{R}$ را برای برنامه‌ی $\mathsf{P}$ و محیط اولیه‌ی $\underline{\rho}$ با 
$$\mathsf{P} , \underline{\rho} \models_s \mathsf{R}$$
نشان می‌دهیم و برقرار بودن این شرط به شکل زیر تعریف می‌شود:
$$\mathsf{P} , \underline{\rho} \models_s \mathsf{R} \iff \{\underline{\rho}\} \times \mathcal{S}^* \llbracket \mathsf{P} \rrbracket \subseteq \hat{\mathcal{M}} \langle \underline{\rho} , \mathsf{R} \rangle \mathcal{S}^* \llbracket \mathsf{P} \rrbracket$$

در اینجا تعریف توابع مربوط به وارسی مدل ساختارمند به پایان می‌رسد.

 
 
 
 
 